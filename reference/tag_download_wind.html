<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content='This function download data associated to each flight from the ERA5 hourly pressure levels
with the Climate Data Store (CDS) and through the ecmwfr R package.
Any variable available from the ERA5 pressure level
can be downloaded.
The flights are determined from the stationary periods classified tag$stap. It request a
single file for each flight using the exact time (hourly basis) and pressure (altitude). To make
the download more efficient, wf_request_batch()
is used to download all files at the same time (up to 20 requests in parallel).
To be able to download data from the Climate Data Store (CDS), you will need to create an account
on https://cds.climate.copernicus.eu. Once created, you can
retrieve your API key on https://cds.climate.copernicus.eu/user/ and save them in your environment file
(i.e., .Renviron). You can open this file with usethis::edit_r_environ() and add:

  cds_user = "{UID}"
  cds_key = "{API Key}"
'><title>Download flight data — tag_download_wind • GeoPressureR</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Download flight data — tag_download_wind"><meta property="og:description" content='This function download data associated to each flight from the ERA5 hourly pressure levels
with the Climate Data Store (CDS) and through the ecmwfr R package.
Any variable available from the ERA5 pressure level
can be downloaded.
The flights are determined from the stationary periods classified tag$stap. It request a
single file for each flight using the exact time (hourly basis) and pressure (altitude). To make
the download more efficient, wf_request_batch()
is used to download all files at the same time (up to 20 requests in parallel).
To be able to download data from the Climate Data Store (CDS), you will need to create an account
on https://cds.climate.copernicus.eu. Once created, you can
retrieve your API key on https://cds.climate.copernicus.eu/user/ and save them in your environment file
(i.e., .Renviron). You can open this file with usethis::edit_r_environ() and add:

  cds_user = "{UID}"
  cds_key = "{API Key}"
'><meta property="og:image" content="https://raphaelnussbaumer.com/GeoPressureR/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=M5FY4BPHTB"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'M5FY4BPHTB');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">GeoPressureR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">3.2.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/Rafnuss/GeoPressureR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Download flight data</h1>
      <small class="dont-index">Source: <a href="https://github.com/Rafnuss/GeoPressureR/blob/HEAD/R/tag_download_wind.R" class="external-link"><code>R/tag_download_wind.R</code></a></small>
      <div class="d-none name"><code>tag_download_wind.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function download data associated to each flight from the <a href="https://cds.climate.copernicus.eu/cdsapp#!/dataset/reanalysis-era5-pressure-levels?tab=overview" class="external-link">ERA5 hourly pressure levels</a>
with the <a href="https://cds.climate.copernicus.eu" class="external-link">Climate Data Store (CDS)</a> and through the <a href="https://bluegreen-labs.github.io/ecmwfr/index.html" class="external-link"><code>ecmwfr</code> R package</a>.</p>
<p><a href="https://confluence.ecmwf.int/display/CKB/ERA5%3A+data+documentation#ERA5:datadocumentation-Table9" class="external-link">Any variable available from the ERA5 pressure level</a>
can be downloaded.</p>
<p>The flights are determined from the stationary periods classified <code>tag$stap</code>. It request a
single file for each flight using the exact time (hourly basis) and pressure (altitude). To make
the download more efficient, <a href="https://bluegreen-labs.github.io/ecmwfr/articles/advanced_vignette.html#batch-parallel-requests" class="external-link"><code>wf_request_batch()</code></a>
is used to download all files at the same time (up to 20 requests in parallel).</p>
<p>To be able to download data from the Climate Data Store (CDS), you will need to create an account
on <a href="https://cds.climate.copernicus.eu" class="external-link">https://cds.climate.copernicus.eu</a>. Once created, you can
retrieve your API key on <a href="https://cds.climate.copernicus.eu/user/" class="external-link">https://cds.climate.copernicus.eu/user/</a> and save them in your environment file
(i.e., <code>.Renviron</code>). You can open this file with <code>usethis::edit_r_environ()</code> and add:
<code>
  cds_user = "{UID}"
  cds_key = "{API Key}"
</code></p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">tag_download_wind</span><span class="op">(</span></span>
<span>  <span class="va">tag</span>,</span>
<span>  extent <span class="op">=</span> <span class="va">tag</span><span class="op">$</span><span class="va">param</span><span class="op">$</span><span class="va">extent</span>,</span>
<span>  include_stap_id <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"u_component_of_wind"</span>, <span class="st">"v_component_of_wind"</span><span class="op">)</span>,</span>
<span>  cds_key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"cds_key"</span><span class="op">)</span>,</span>
<span>  cds_user <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"cds_user"</span><span class="op">)</span>,</span>
<span>  file <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">stap_id</span><span class="op">)</span></span>
<span>    <span class="fu">glue</span><span class="fu">::</span><span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></span><span class="op">(</span><span class="st">"./data/wind/{tag$param$id}/{tag$param$id}_{stap_id}.nc"</span><span class="op">)</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>tag</dt>
<dd><p>a GeoPressureR <code>tag</code> object.</p></dd>


<dt>extent</dt>
<dd><p>geographical extent of the map on which the likelihood will be computed.
Vector of length 4 <code>c(xmin, xmax, ymin, ymax)</code> or <code>c(W, E, S, N)</code>.</p></dd>


<dt>include_stap_id</dt>
<dd><p>stationary period identifiers of the start of the flight to download.
Default is to download all flights.</p></dd>


<dt>variable</dt>
<dd><p>list of variables to download from <a href="https://confluence.ecmwf.int/display/CKB/ERA5%3A+data+documentation#ERA5:datadocumentation-Table9" class="external-link">the ERA5 pressure level</a>:
<code>"u_component_of_wind"</code>, <code>"v_component_of_wind"</code>,  <code>"temperature"</code>, <code>"fraction_of_cloud_cover"</code>,
<code>"relative_humidity"</code>, , <code>"vertical_velocity"</code>, <code>"specific_cloud_ice_water_content"</code>,
<code>"specific_cloud_liquid_water_content"</code>, <code>"specific_humidity"</code>, <code>"specific_rain_water_content"</code>,
<code>"specific_snow_water_content"</code>, <code>"divergence"</code>, <code>"geopotential"</code>, <code>"ozone_mass_mixing_ratio"</code>,
<code>"potential_vorticity"</code>, <code>'vorticity"</code>.</p></dd>


<dt>cds_key</dt>
<dd><p>ECMWF API Key available from <a href="https://cds.climate.copernicus.eu/user/" class="external-link">your user page </a>. See <code>wf_set_key()</code>.</p></dd>


<dt>cds_user</dt>
<dd><p>ECMWF user name (UID value) available from <a href="https://cds.climate.copernicus.eu/user/" class="external-link">your user page </a>. See <code>wf_set_key()</code>.</p></dd>


<dt>file</dt>
<dd><p>absolute or relative path of the ERA5 wind data file to be downloaded. Function
taking as single argument the stationary period identifier.</p></dd>


<dt>overwrite</dt>
<dd><p>logical. If <code>TRUE</code>, file is overwritten.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>the path of the downloaded (requested file) or the an R6 object with download/transfer
information</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><a href="https://bluegreen-labs.github.io/ecmwfr/reference/wf_request.html" class="external-link"><code>wf_request()</code></a>,
<a href="https://raphaelnussbaumer.com/GeoPressureManual/trajectory-with-wind.html" class="external-link">GeoPressureManual </a></p>
<p>Other movement: 
<code><a href="bird_create.html">bird_create</a>()</code>,
<code><a href="graph_set_movement.html">graph_set_movement</a>()</code>,
<code><a href="graph_transition.html">graph_transition</a>()</code>,
<code><a href="plot_graph_movement.html">plot_graph_movement</a>()</code>,
<code><a href="speed2prob.html">speed2prob</a>()</code></p></div>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Raphaël Nussbaumer, Mathieu Gravey.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

