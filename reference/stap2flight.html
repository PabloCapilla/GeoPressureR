<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content='Convert a stationary period data.frame stap into a flight data.frame or list. Flight are
computed as the difference between the end of a stationary period to the start of the next one.
Because the pressure/acceleration is labeled for "in flight", the bird was already in flight
before the first label and after the last label. We account for this by adding to all flights
duration half the temporal resolution of the sensor.
You can compute the flight between specific stationary periods using stap_include. In this
case, the flight duration is computed as the sum of individual flights in between.
You can return the flight as a data.frame or as a list if you want to retrieve the information
of all individual flight between the stap_include.'><title>Compute flights from stationary periods — stap2flight • GeoPressureR</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Compute flights from stationary periods — stap2flight"><meta property="og:description" content='Convert a stationary period data.frame stap into a flight data.frame or list. Flight are
computed as the difference between the end of a stationary period to the start of the next one.
Because the pressure/acceleration is labeled for "in flight", the bird was already in flight
before the first label and after the last label. We account for this by adding to all flights
duration half the temporal resolution of the sensor.
You can compute the flight between specific stationary periods using stap_include. In this
case, the flight duration is computed as the sum of individual flights in between.
You can return the flight as a data.frame or as a list if you want to retrieve the information
of all individual flight between the stap_include.'><meta property="og:image" content="https://raphaelnussbaumer.com/GeoPressureR/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=M5FY4BPHTB"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'M5FY4BPHTB');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">GeoPressureR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">3.1.7</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/Rafnuss/GeoPressureR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Compute flights from stationary periods</h1>
      <small class="dont-index">Source: <a href="https://github.com/Rafnuss/GeoPressureR/blob/HEAD/R/stap2flight.R" class="external-link"><code>R/stap2flight.R</code></a></small>
      <div class="d-none name"><code>stap2flight.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Convert a stationary period data.frame <code>stap</code> into a flight data.frame or list. Flight are
computed as the difference between the end of a stationary period to the start of the next one.
Because the pressure/acceleration is labeled for "in flight", the bird was already in flight
before the first label and after the last label. We account for this by adding to all flights
duration half the temporal resolution of the sensor.</p>
<p>You can compute the flight between specific stationary periods using <code>stap_include</code>. In this
case, the flight duration is computed as the sum of individual flights in between.</p>
<p>You can return the flight as a data.frame or as a list if you want to retrieve the information
of all individual flight between the <code>stap_include</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">stap2flight</span><span class="op">(</span></span>
<span>  <span class="va">stap</span>,</span>
<span>  stap_include <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  format <span class="op">=</span> <span class="st">"df"</span>,</span>
<span>  units <span class="op">=</span> <span class="st">"hours"</span>,</span>
<span>  return_numeric <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>stap</dt>
<dd><p>a stationary period data.frame (see <code><a href="tag_label_stap.html">tag_label_stap()</a></code>).</p></dd>


<dt>stap_include</dt>
<dd><p>vector of the stationary period <code>stap_id</code> to consider in the flight. Default
is to use <code>stap$stap_id[stap$include]</code> or <code>stap$stap_id</code> if <code>model</code> is not available in <code>stap</code>.</p></dd>


<dt>format</dt>
<dd><p>character to return a list <code>"list"</code> or a data.frame <code>"df"</code> (see description)</p></dd>


<dt>units</dt>
<dd><p>character string. Units in which the results are desired. Can be abbreviated.
See <code><a href="https://rdrr.io/r/base/difftime.html" class="external-link">difftime()</a></code></p></dd>


<dt>return_numeric</dt>
<dd><p>logical to return the duration as a numeric rather than with a duration
format.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A list or a data.frame (see description) containing</p><ul><li><p><code>start</code>: Start time of the (first) flight</p></li>
<li><p><code>end</code>: End time of the (last) flight</p></li>
<li><p><code>stap_id_s</code>: Source stap_id (i.e, start)</p></li>
<li><p><code>stap_id_t</code>: Target stap_id (i.e, end)</p></li>
<li><p><code>duration</code>: (Sum of the) duration of flight(s)</p></li>
<li><p>(<code>n</code>: Numer of flights)
The value in brackets are only for the data.frame</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"GeoPressureR"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tag</span> <span class="op">&lt;-</span> <span class="fu"><a href="tag_create.html">tag_create</a></span><span class="op">(</span><span class="st">"18LX"</span>, quiet <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="tag_label.html">tag_label</a></span><span class="op">(</span>quiet <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># By default, return a data.frame of all individual flights</span></span></span>
<span class="r-in"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu">stap2flight</span><span class="op">(</span><span class="va">tag</span><span class="op">$</span><span class="va">stap</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |start               |end                 | stap_s| stap_t| duration|  n|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |:-------------------|:-------------------|------:|------:|--------:|--:|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |2017-08-04 19:47:30 |2017-08-04 23:17:30 |      1|      2| 3.500000|  1|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |2017-08-05 19:27:30 |2017-08-06 02:52:30 |      2|      3| 7.416667|  1|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |2017-08-06 19:12:30 |2017-08-07 03:12:30 |      3|      4| 8.000000|  1|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |2017-08-07 19:12:30 |2017-08-08 00:12:30 |      4|      5| 5.000000|  1|</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Compute the total flight between stap 1,3 and 5. Sum flight duration in between.</span></span></span>
<span class="r-in"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu">stap2flight</span><span class="op">(</span><span class="va">tag</span><span class="op">$</span><span class="va">stap</span>, stap_include <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |   |start               |end                 | stap_s| stap_t| duration|  n|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |:--|:-------------------|:-------------------|------:|------:|--------:|--:|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |1  |2017-08-04 19:47:30 |2017-08-06 02:52:30 |      1|      3| 10.91667|  2|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |3  |2017-08-06 19:12:30 |2017-08-08 00:12:30 |      3|      5| 13.00000|  2|</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Can also return as a list of data.frame to access individual flights information.</span></span></span>
<span class="r-in"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu">stap2flight</span><span class="op">(</span><span class="va">tag</span><span class="op">$</span><span class="va">stap</span>, stap_include <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">5</span><span class="op">)</span>, format <span class="op">=</span> <span class="st">"list"</span>, units <span class="op">=</span> <span class="st">"secs"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |start               |end                 | stap_s| stap_t| duration|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |:-------------------|:-------------------|------:|------:|--------:|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |2017-08-04 19:47:30 |2017-08-04 23:17:30 |      1|      2|    12600|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |2017-08-05 19:27:30 |2017-08-06 02:52:30 |      2|      3|    26700|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |   |start               |end                 | stap_s| stap_t| duration|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |:--|:-------------------|:-------------------|------:|------:|--------:|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |3  |2017-08-06 19:12:30 |2017-08-07 03:12:30 |      3|      4|    28800|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |4  |2017-08-07 19:12:30 |2017-08-08 00:12:30 |      4|      5|    18000|</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Raphaël Nussbaumer, Mathieu Gravey.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

